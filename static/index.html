<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RUS - URL Shortener | Part of a8n-tools</title>
    <link rel="stylesheet" href="styles.css?v=3" />
    <style>
      .landing-hero {
        min-height: calc(100vh - 80px);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 60px 20px;
        position: relative;
      }

      .affiliate-badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: 50px;
        padding: 8px 20px;
        margin-bottom: 30px;
        font-size: 0.9em;
        color: var(--text-secondary);
      }

      .affiliate-badge a {
        color: var(--rust-orange);
        text-decoration: none;
        font-weight: 600;
      }

      .affiliate-badge a:hover {
        text-decoration: underline;
      }

      .hero-icon {
        font-size: 5em;
        margin-bottom: 20px;
        filter: drop-shadow(0 10px 30px rgba(247, 76, 0, 0.3));
      }

      .hero-title {
        font-size: 3.5em;
        font-weight: 800;
        color: var(--text-primary);
        margin-bottom: 10px;
        letter-spacing: -1px;
      }

      .hero-title span {
        color: var(--rust-orange);
      }

      .hero-subtitle {
        font-size: 1.4em;
        color: var(--text-secondary);
        max-width: 600px;
        margin: 0 auto 40px;
        line-height: 1.6;
      }

      .hero-cta {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
      }

      .cta-btn {
        padding: 16px 32px;
        border-radius: 12px;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .cta-primary {
        background: linear-gradient(135deg, var(--rust-orange) 0%, var(--rust-orange-dark) 100%);
        color: white;
        border: none;
      }

      .cta-secondary {
        background: var(--bg-card);
        color: var(--text-primary);
        border: 2px solid var(--border-color);
      }

      .cta-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }

      .cta-primary:hover {
        box-shadow: 0 10px 30px rgba(247, 76, 0, 0.4);
      }

      /* Features Section */
      .features-section {
        padding: 80px 20px;
        background: var(--bg-card);
        border-top: 1px solid var(--border-color);
      }

      .features-container {
        max-width: 1200px;
        margin: 0 auto;
      }

      .section-title {
        text-align: center;
        font-size: 2.5em;
        color: var(--text-primary);
        margin-bottom: 50px;
      }

      .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
      }

      .feature-card {
        background: var(--bg-dark);
        border-radius: 16px;
        padding: 30px;
        border: 1px solid var(--border-color);
        transition: transform 0.2s, box-shadow 0.2s;
      }

      .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }

      .feature-icon {
        font-size: 2.5em;
        margin-bottom: 15px;
      }

      .feature-card h3 {
        font-size: 1.3em;
        color: var(--text-primary);
        margin-bottom: 10px;
      }

      .feature-card p {
        color: var(--text-secondary);
        line-height: 1.6;
      }

      /* About Section */
      .about-section {
        padding: 80px 20px;
      }

      .about-container {
        max-width: 800px;
        margin: 0 auto;
        text-align: center;
      }

      .about-section h2 {
        font-size: 2em;
        color: var(--text-primary);
        margin-bottom: 20px;
      }

      .about-section p {
        color: var(--text-secondary);
        font-size: 1.1em;
        line-height: 1.8;
        margin-bottom: 30px;
      }

      .a8n-link {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        color: var(--rust-orange);
        font-weight: 600;
        text-decoration: none;
        font-size: 1.1em;
        transition: opacity 0.2s;
      }

      .a8n-link:hover {
        opacity: 0.8;
        text-decoration: underline;
      }

      /* Footer */
      .landing-footer {
        padding: 40px 20px;
        text-align: center;
        border-top: 1px solid var(--border-color);
        color: var(--text-secondary);
      }

      .footer-links {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }

      .footer-links a {
        color: var(--text-secondary);
        text-decoration: none;
        transition: color 0.2s;
      }

      .footer-links a:hover {
        color: var(--rust-orange);
      }

      .footer-brand {
        font-size: 0.9em;
        opacity: 0.7;
      }

      .footer-brand a {
        color: var(--rust-orange);
        text-decoration: none;
      }

      @media (max-width: 768px) {
        .hero-title {
          font-size: 2.5em;
        }

        .hero-subtitle {
          font-size: 1.1em;
        }

        .hero-cta {
          flex-direction: column;
          align-items: center;
        }

        .cta-btn {
          width: 100%;
          max-width: 300px;
          justify-content: center;
        }

        .section-title {
          font-size: 2em;
        }
      }
    </style>
  </head>
  <body>
    <nav class="navbar">
      <div class="nav-content">
        <a href="/" class="nav-brand">ü¶Ä RUS</a>
        <div class="nav-links" id="navLinks">
          <a href="#features">Features</a>
          <a href="#about">About</a>
          <a href="login.html">Log In</a>
          <a href="signup.html" id="signupLink">Sign Up</a>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="landing-hero">
      <div class="affiliate-badge">
        Part of <a href="#" id="a8nLink">a8n-tools</a> suite
      </div>
      <div class="hero-icon">üîó</div>
      <h1 class="hero-title">
        <span>RUS</span> - URL Shortener
      </h1>
      <p class="hero-subtitle">
        Create short, trackable links in seconds. Built with Rust for blazing fast performance and rock-solid reliability.
      </p>
      <div class="hero-cta" id="heroCta">
        <a href="signup.html" class="cta-btn cta-primary" id="getStartedBtn">
          Get Started Free
        </a>
        <a href="login.html" class="cta-btn cta-secondary">
          Log In
        </a>
      </div>
    </section>

    <!-- Features Section -->
    <section class="features-section" id="features">
      <div class="features-container">
        <h2 class="section-title">Why RUS?</h2>
        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">‚ö°</div>
            <h3>Lightning Fast</h3>
            <p>Built with Rust and Actix-web, RUS delivers sub-millisecond redirects. Your links load instantly, every time.</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üìä</div>
            <h3>Click Analytics</h3>
            <p>Track how your links perform. See click counts and monitor engagement across all your shortened URLs.</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üîí</div>
            <h3>Secure by Design</h3>
            <p>JWT authentication and bcrypt password hashing keep your account and links protected.</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üè∑Ô∏è</div>
            <h3>Custom Names</h3>
            <p>Organize your links with custom names. Easily find and manage URLs in your dashboard.</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üì±</div>
            <h3>QR Codes</h3>
            <p>Generate QR codes for any shortened URL. Perfect for print materials and offline sharing.</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üöÄ</div>
            <h3>Self-Hostable</h3>
            <p>Deploy on your own infrastructure with Docker. Full control over your data and branding.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section class="about-section" id="about">
      <div class="about-container">
        <h2>Part of the a8n-tools Suite</h2>
        <p>
          RUS is a powerful URL shortening service that integrates seamlessly with the a8n-tools ecosystem.
          Whether you're managing marketing campaigns, sharing resources, or tracking link engagement,
          RUS provides the speed and reliability you need.
        </p>
        <a href="#" class="a8n-link" id="a8nLinkFooter">
          Explore a8n-tools ‚Üí
        </a>
      </div>
    </section>

    <!-- Footer -->
    <footer class="landing-footer">
      <div class="footer-links">
        <a href="report.html">Report Abuse</a>
        <a href="#" id="a8nLinkNav">a8n-tools</a>
      </div>
      <p class="footer-brand">
        Made with ü¶Ä using <a href="https://www.rust-lang.org/" target="_blank">Rust</a>
        <br />
        <span id="version"></span>
      </p>
    </footer>

    <script src="auth.js"></script>
    <script>
      // Configuration - Update this when you have the a8n-tools domain
      const A8N_TOOLS_URL = '#'; // TODO: Replace with actual a8n-tools URL

      // Update all a8n-tools links
      document.querySelectorAll('#a8nLink, #a8nLinkFooter, #a8nLinkNav').forEach(link => {
        link.href = A8N_TOOLS_URL;
      });

      // Check if setup is required
      async function checkSetup() {
        try {
          const response = await fetch('/api/setup/required');
          const data = await response.json();

          if (data.setup_required) {
            window.location.href = 'setup.html';
          }
        } catch (error) {
          console.error('Failed to check setup status:', error);
        }
      }

      checkSetup();

      // Fetch and display version
      async function loadVersion() {
        try {
          const response = await fetch('/api/version');
          const data = await response.json();
          document.getElementById('version').textContent = `v${data.version}`;
        } catch (error) {
          console.error('Failed to load version:', error);
        }
      }

      loadVersion();

      // Update nav and CTA based on auth status and registration config
      async function updateUI() {
        const navLinks = document.getElementById('navLinks');
        const heroCta = document.getElementById('heroCta');

        if (isAuthenticated()) {
          // User is logged in - show dashboard link
          navLinks.innerHTML = `
            <a href="#features">Features</a>
            <a href="#about">About</a>
            <a href="dashboard.html">Dashboard</a>
            <button class="logout-btn" onclick="handleLogout()">Log Out</button>
          `;
          heroCta.innerHTML = `
            <a href="dashboard.html" class="cta-btn cta-primary">
              Go to Dashboard
            </a>
          `;
        } else {
          // Check if registration is enabled
          try {
            const response = await fetch('/api/config');
            const data = await response.json();

            if (!data.allow_registration) {
              // Hide signup options
              const signupLink = document.getElementById('signupLink');
              const getStartedBtn = document.getElementById('getStartedBtn');
              if (signupLink) signupLink.style.display = 'none';
              if (getStartedBtn) getStartedBtn.style.display = 'none';
            }
          } catch (error) {
            console.error('Failed to check config:', error);
          }
        }
      }

      updateUI();

      function handleLogout() {
        logout();
        window.location.reload();
      }

      // Smooth scroll for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
          const href = this.getAttribute('href');
          if (href === '#') return; // Skip placeholder links

          e.preventDefault();
          const target = document.querySelector(href);
          if (target) {
            target.scrollIntoView({ behavior: 'smooth' });
          }
        });
      });
    </script>
  </body>
</html>
